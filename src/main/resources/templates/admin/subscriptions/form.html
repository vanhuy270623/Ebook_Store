<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="vi">
<head>
	<th:block th:replace="~{admin/layout/head :: head}"></th:block>
</head>
<body class="hold-transition skin-blue sidebar-mini">
<div class="wrapper">
	<div th:replace="~{admin/layout/header :: header}"></div>
	<div th:replace="~{admin/layout/sidebar :: sidebar}"></div>

	<div class="content-wrapper">
		<section class="content-header">
			<h1>
				<span th:if="${isEdit}">Chỉnh sửa gói subscription</span>
				<span th:unless="${isEdit}">Thêm gói subscription mới</span>
			</h1>
			<ol class="breadcrumb">
				<li><a th:href="@{/admin/dashboard}"><i class="fa fa-dashboard"></i> Dashboard</a></li>
				<li><a th:href="@{/admin/subscriptions}">Quản lý subscription</a></li>
				<li class="active" th:text="${isEdit} ? 'Chỉnh sửa' : 'Thêm mới'"></li>
			</ol>
		</section>

		<section class="content">
			<div class="row" th:if="${error}">
				<div class="col-md-12">
					<div class="alert alert-danger alert-dismissible">
						<button type="button" class="close" data-dismiss="alert">×</button>
						<span th:text="${error}"></span>
					</div>
				</div>
			</div>

			<form th:action="@{${isEdit ? '/admin/subscriptions/update/' + subscriptionRequest.subscriptionId : '/admin/subscriptions'}}"
				  th:object="${subscriptionRequest}"
				  method="post">

				<input type="hidden" th:if="${isEdit}" th:field="*{subscriptionId}"/>

				<div class="row">
					<div class="col-md-8">
						<div class="box box-primary">
							<div class="box-header">
								<h3 class="box-title">Thông tin gói</h3>
							</div>
							<div class="box-body">
								<div class="form-group">
									<label for="packageName">Tên gói <span style="color:red;">*</span></label>
									<select class="form-control" id="packageName" th:field="*{packageName}" required>
										<option th:each="pkg : ${packageNames}"
												th:value="${pkg}"
												th:text="${pkg.name()}">
										</option>
									</select>
								</div>

								<div class="form-group">
									<label for="description">Mô tả</label>
									<textarea class="form-control" id="description" th:field="*{description}" rows="3" maxlength="1000" placeholder="Mô tả gói subscription"></textarea>
								</div>

								<div class="row">
									<div class="col-md-6">
										<div class="form-group">
											<label for="price">Giá <span style="color:red;">*</span></label>
											<div class="input-group">
												<input type="number" class="form-control" id="price"
													   th:field="*{price}"
													   step="1000"
													   min="0"
													   required>
												<span class="input-group-addon">VNĐ</span>
											</div>
										</div>
									</div>

									<div class="col-md-6">
										<div class="form-group">
											<label for="durationDays">Thời hạn <span style="color:red;">*</span></label>
											<div class="input-group">
												<input type="number" class="form-control" id="durationDays"
													   th:field="*{durationDays}"
													   min="1"
													   required>
												<span class="input-group-addon">Ngày</span>
											</div>
										</div>
									</div>
								</div>

								<div class="form-group">
									<label for="maxDevices">Số thiết bị tối đa <span style="color:red;">*</span></label>
									<input type="number" class="form-control" id="maxDevices"
										   th:field="*{maxDevices}"
										   min="1"
										   max="10"
										   required>
									<small class="text-muted">Số thiết bị có thể đăng nhập đồng thời</small>
								</div>

								<div class="form-group">
									<label>
										<input type="checkbox" th:field="*{isActive}" />
										Kích hoạt gói
									</label>
								</div>
							</div>
						</div>
					</div>

					<div class="col-md-4">
						<div class="box box-info">
							<div class="box-header">
								<h3 class="box-title">Gợi ý giá</h3>
							</div>
							<div class="box-body">
								<ul class="list-unstyled">
									<li><strong>FREE:</strong> 0 đ (30 ngày)</li>
									<li><strong>BASIC:</strong> 49,000 đ/tháng</li>
									<li><strong>PREMIUM:</strong> 99,000 đ/tháng</li>
									<li><strong>VIP:</strong> 199,000 đ/tháng</li>
								</ul>
							</div>
						</div>

						<div class="box box-warning">
							<div class="box-header">
								<h3 class="box-title">Lưu ý</h3>
							</div>
							<div class="box-body">
								<p><small>
									<i class="fa fa-info-circle"></i> Gói đã có đơn hàng không thể xóa.<br>
									<i class="fa fa-info-circle"></i> Có thể tắt kích hoạt để ẩn gói.<br>
									<i class="fa fa-info-circle"></i> Thời hạn tính bằng ngày.
								</small></p>
							</div>
						</div>
					</div>
				</div>

				<div class="row">
					<div class="col-md-12">
						<div class="box-footer">
							<button type="submit" class="btn btn-primary btn-lg">
								<i class="fa fa-save"></i> Lưu gói subscription
							</button>
							<a th:href="@{/admin/subscriptions}" class="btn btn-default btn-lg">
								<i class="fa fa-times"></i> Hủy
							</a>
						</div>
					</div>
				</div>
			</form>
		</section>
	</div>

	<div th:replace="~{admin/layout/footer :: footer}"></div>
</div>

<th:block th:replace="~{admin/layout/scripts :: scripts}"></th:block>
</body>
</html>

